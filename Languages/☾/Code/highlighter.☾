â¨¡ traceback, threading, sys
â®Œ pathlib â¨¡ Path as ğ©
â®Œ json â¨¡ loads
ó°‹º("kots", *)
ó°‹º("ğŸŒˆ", *)

styf = cpy_dir / "FontCompose/Output/style.json"
styd = styf â¥‰ î¸½ â¥‰ loads â¥‰ â„µ

âŠ¢ sty(s, bg=0, de="bec"):
    âˆ€k,vâˆˆstyd:
        Â¿sâˆ‰k âˆ¨ "color"âˆ‰v: â†º
        â†ª termclr(s, vô‹•¨î ó°‚¼â‚—ó°‚¼áµ£ô‹•¨, bg)
    â†ª termclr(s, de, bg)

âŠ¢ __highlighter__(l, b=âœ—, clr=âœ“):
    s, â ¤e = (á”âˆ˜l).split(â›á§)
    
    e = e á™§Â¹ 0â‹„1
    e = e êŸ¿ ó°²£chr(ğ‘–(x,16))+y
    r = (s+â†eâ¨á¦) á´ ó°²¡clrâ­œsty(x, b â­œ"400"â­ 0)â­xó°…‚ â¨á¦
    â†ª r

âŠ¢ __error_printer__(Îµ):
    â„­ = traceback.linecache.CPY_CACHE
    É™ = Îµ.__traceback__
    TB, i = [], 0
    â°i+=1:
        Â¿i â‰¥ 50:
            â€¹Too long a traceback, stopping at âŸ¦iâŸ§ frames!â€ºâ˜¾
            â‡¥
        g = É™.tb_frame.f_globals
        âˆ€_âˆˆâ›_:
            Â¿"__file__"âˆˆg:
                f = gô‹•¨ô‹•ô‹•î áµ¢â‚—â‚‘ô‹•ô‹•ô‹•¨
                Â¿f.endswith("/refresher.py"): â‡¥
                î¬¦ Â¿f.endswith("/header.â˜¾"): â‡¥
                Â¿fâˆˆâ„­:
                    F = â„­î 
                â¸˜fâ‰”ğ©(f) â†’ .existsî®¦:
                    F = î¸½(f)
                Â¡:
                    â€¹Cannot find "âŸ¦fâŸ§"??â€ºâ˜¾ ; â‡¥
            Â¡:
                â€¹Traceback with no file? âŸ¦traceback.format_exception(Îµ) âŸ•âŸ§â€ºâ˜¾ ; â‡¥
            
            F = F.split(ğ—»)
            pps = â ¤É™.tb_frame.f_code.co_positionsî®¦,
            s, e, a, b = ppsôŒ¿°ô‹•œâ‚œî …ô‹•â‚—â‚â‚›â‚œáµ¢ôŠ²—â‚‚
            Â¿aâ‰…â–¡: TB += [(f, s, á¦, "Missing location!", á¦)]
            l = ğ—».join(Fâ‚›â‚‹â‚ï¹•â‚‘).encode("utf-8")
            A,B,C = lï¹•â‚â‹„lâ‚ï¹•î …â‹„lî …ï¹• á´ ó°²¡x.decode("utf-8", errors="replace")
            TB += [(f, s, __highlighter__(A),
                          __highlighter__(B,âœ“),
                          __highlighter__(C))]
        Â¿É™.tb_nextâ‰•É™â‰…â–¡: â‡¥
    
    CLR1, CLR2 = "faf", "f55"
    
    asd = termclr(â›â®¡, CLR1)
    maxl, prevf = TB â¤‰â°ôŒ¾•ô‹‹ ó°²¡xâ‚, â–¡
    zf = á”(maxlâ‚)ğŸƒŒ
    âˆ€f,s,A,B,CâˆˆTB:
        Â¿fâ‰ prevf: termclr(f, CLR1)â˜¾
        â€¹âŸ¦asdâŸ§ âŸ¦á”(s).zfill(zf)âŸ§ğ˜âŸ¦AâŸ§âŸ¦BâŸ§âŸ¦CâŸ§â€ºâ˜¾
        prevf = f
    â€¹âŸ¦termclr("Error:", CLR2)âŸ§ âŸ¦__highlighter__(Îµ)âŸ§â€ºâ˜¾

__exports__ = "__highlighter__", "__error_printer__"
sys.excepthook = ó°²¥__error_printer__(y)
threading.excepthook = ï€…sys.excepthook

Â¿ __name__â‰¡"__main__":
    â° lâ‰”sys.stdin.readlineî®¦:
        â˜¾Â´(highlightâˆ˜l, end=á¦)