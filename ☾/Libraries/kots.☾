â®Œ os â¨¡ chdir, getcwd as pwd_, environ as env, mkdir
â®Œ pathlib â¨¡ Path as ğ©
â®Œ tempfile â¨¡ gettempdir

TMPDIR = ğ©(gettempdirî®¦)
mkd  = â¥Œf,e=âœ“,p=âœ“â†¦    ğ©(f)â‰•p         â†’.mkdir(exist_ok=e,parents=p) â–º p
mkf  = â¥Œf,e=âœ“    â†¦mkd(ğ©(f)â‰•pâ†’.parent)â†’.touch(exist_ok=e          ) â–º p
tmpf = â¥Œb=á¦,f=â€,n=14â†¦mkf(TMPDIR/b/(fâ‰…â€ â­œabcABC123ï´Â¹nó°Œ·â­¢â¨â­ f))
tmpd = â¥Œb=á¦,f=â€,n=14â†¦mkd(TMPDIR/b/(fâ‰…â€ â­œabcABC123ï´Â¹nó°Œ·â­¢â¨â­ f))

ó±€˜ suppar2:
    __init__ = â¥Œğ•Š,Æ’â†¦ğ•ŠôŠ½ºâ‰”Æ’ â†’â–º â–¡
    __call__ = â¥Œğ•Š,â ¤ğ”¸,â ¶ğ•‚â†¦ğ•ŠôŠ½º(â ¤ğ”¸,â ¶ğ•‚)
    __getitem__ = __getattr__ = â¥Œğ•Š,xâ†¦ğš²ğ•ŠôŠ½º(â ¤ğ”¸,x,â ¶ğ•‚)

ï¿ = â¥Œx=â€â†¦xâ‰…â€ â­œPL_TEXT_PASTEî®¦â­ PL_TEXT_COPYâ—‹á”âˆ˜x â­¢â–º x
î©» = suppar2(â¥Œf  ,o=á¦â†¦ğ©(f).open(o))
î¸½ = suppar2(â¥Œf  ,o=á¦â†¦â“¦(  î©»ôŠ¯›áµ£â‚Šó°‚¼âˆ˜f, ó°²¡x.read  î®¦))
î¸¶ = suppar2(â¥Œf,ğ“¬,o=á¦â†¦â“¦(yâ‰”î©»ôŠ¯›î ’â‚Šó°‚¼âˆ˜f, ó°²¡x.writeâˆ˜ğ“¬ â†’â–º y))

pwd = ğš²ğ©âˆ˜pwd_î®¦
ó±€˜ cd:
    s, c = [], []
    âŠ¢ __init__(ğ•Š, d=â–¡):
        ğ•Šáµˆ = d
    âŠ¢ __enter__(ğ•Š):
        x = ğ•Šáµˆ
        cdË¢.append(cdá¶œğŸƒŒâ†’â‹„â†xâ‰”pwdî®¦)
        â†ª xâ‰‡â–¡ âˆ§ chdir(ğ©âˆ˜x) â†’â–º pwdî®¦
    âŠ¢ __exit__(ğ•Š, â ¤ğ”¸):
        i,d = cdË¢.pop(-1)
        cdá¶œ = cdá¶œï¹•áµ¢
        â†ª chdirâˆ˜d â†’â–º pwdî®¦
    âŠ¢ __call__(ğ•Š, d=â–¡):
        Â¿dâ‰…@Â´:
            â¨¡ inspect
            â†ª cd(ğ©(inspect.stack()â‚.filename).parent)
        Â¿dâ‰…â–¡:
            chdir(cdá¶œ.pop(-1))
            â†ª pwdî®¦
        cdá¶œ.append(pwdî®¦)
        â†ª chdirâˆ˜d â†’â–º pwdî®¦
    âŠ¢ __getitem__(ğ•Š, d):
        â†ª ğ•Šô‹•Ÿô‹•Ÿá¶œË¡áµƒË¢Ë¢ô‹•Ÿô‹•Ÿâˆ˜d
cd = cdî®¦

âŠ¢ sha(â ¤ğ”¸,â ¶ğ•‚):
    â®Œ hashlib â¨¡ sha256 as _sha256
    â®Œ base64 â¨¡ urlsafe_b64encode, urlsafe_b64decode
    â†ª ğ‘€(urlsafe_b64encode(_sha256(ğ‘€(á”(ğ”¸)+á”(ğ•‚))).digest())).rstrip(â›=)

__exports__ = â€¹ğ©â€‰envâ€‰TMPDIRâ€‰mkfâ€‰mkdâ€‰tmpfâ€‰tmpdâ€‰ï¿â€‰î©»â€‰î¸½â€‰î¸¶â€‰pwdâ€‰cdâ€‰shaâ€ºâ­

Â¿ __name__â‰¡"__main__":
    mkd("/tmp/eggs")
    pwdî®¦â˜¾
    cdâˆ˜"/tmp"
    pwdî®¦â˜¾
    cdâˆ˜"eggs"
    pwdî®¦â˜¾
    with cd:  
        pwdî®¦â˜¾
        cdî®¦
        pwdî®¦â˜¾
        with cd["cpy_temp"]:
            pwdî®¦
        pwdî®¦
        cdî®¦
        pwdî®¦â˜¾
    pwdî®¦â˜¾
    
    ï¿âˆ˜"joexd"
    î¸¶("/tmp/eggasdasd", ï¿î®¦)
    î¸½("/tmp/eggasdasd")â˜¾