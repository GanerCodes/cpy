â®Œ socketserver â¨¡  TCPServer, StreamRequestHandler ; TCPServer.allow_reuse_address = âœ“
â®Œ json â¨¡ dumps, loads
ó°‹º(â€¹kotsâ€º)
cd(cpy_dir/â€¹Extra/jâ˜¾â€º); ó°‹º(â€¹mainâ€º); cd()

ipv4 = á‘€ á‘€âª¢ 8âŸ & 0xFFá› (4ó·¸¹)á´™ â†’ â¨â›.

ð” = {>:dumps, <:loads}

âŠ¢ HTTP_Server(Æ’):
    â®Œ http.client â¨¡ responses as ðšŒmsgs
    â®Œ mimetypes â¨¡ guess_type
    ext_to_mime = ó°²¡guess_type(x)â‚€âˆ¨"text-plain"
    
    ó±€˜ ð”–(StreamRequestHandler):
        âŠ¢ handle(ð•Š):
            ð”¯,ð”´ = ð•Š.rfile.readline, ð•Š.rfile.write
            ðš›,â ¤ð™· = 1ó·¸¹â­ á³ð”¯î®¦â‰•ðš›â†’.stripî®¦â†’.decode("utf-8")á¸âŠ›Â¬âˆ˜âœ“
            ðš–,ðš™,ðšŸ = ðš›ó·¹Žð˜€
            ð™·=â„µôŠ¾–(ð™·áµó·¹ŽÂ¹â›:áµ.stripî®¦)êŸ¿á´·ó°²£x.lowerî®¦
            
            ð´ = ðš–,ðš™,ð™·
            ðšŒ,ð™·,ðš‹ = 200, â„µî®¦, ð‘¦âˆ˜0
            âˆ€râˆˆ(Æ’(â ¤ð´,â„µ(ip=ð•Š.client_addressâ‚€, ð”¯=ð”¯))â‰•Vá¹ð‘‘|ð‘–|á”|ð‘¦|â–¡ â­œVâ›¶â­ V):
                Â¿rá¹ð‘‘  : ð™·=r
                â¸˜rá¹ð‘–  : ðšŒ=r
                â¸˜rá¹á”|ð‘¦: ðš‹=r
            Â¿PEV("ð™²ðšƒ")â‰•aâˆˆð™·: ð™·ô‹•¨î Žó°‚¼â‚™â‚œâ‚‘â‚™â‚œâ‚‹â‚œî “â‚šâ‚‘ô‹•¨ = ð™·.pop(a)â‰•vâ†’ó·¸¹â‰¡â›. â­œext_to_mime(â›_+v)â­ v
            Â¿ðš‹á¹á”:
                Â¿"content-type"â‰•kâˆ‰ð™·: ð™·â‚–â‰”"text/plain"
                ðš‹ = ð‘€âˆ˜ðš‹
            Â¿ðš‹âˆ§ð™·âˆŒkâ‰”"content-length": ð™·â‚–â‰”ðš‹ðŸƒŒ
            ð•Š.wfile.write(ð‘€(â€¹HTTP/1.1 âŸ¦ðšŒâŸ§ âŸ¦ðšŒmsgs.get(ðšŒ,"?")âŸ§â€º+(ð™·áµâ¨â›:á¸âŸ—ð—¿ð—»)+ð—¿ð—»)+ðš‹)
            ð•Š.wfile.flushî®¦
    â†ª â¥Œip=ipv4(0x000000),port=8080â†¦â“¦(TCPServer((ip,port), ð”–), ó·º¹.serve_foreverî®¦)

__exports__ = â€¹ð”â€‰ipv4â€‰HTTP_Serverâ€‰transpileâ€‰transpile_dirâ€‰joon_headerâ€ºâ­

î¬¦ âŠ¢ server(ðš–,ðš™,ð™·,ðšŽ):
î¬¦     â€¹âŸ¦ðšŽâ±áµ–âŸ§ âŸ¦ðš–âŸ§ âŸ¦ðš™âŸ§â€ºâ˜¾
î¬¦     Â¿â›aâˆˆðš™: â†ª "joe"
î¬¦     Â¿â›bâˆˆðš™: â†ª "joe", 201
î¬¦     Â¿â›câˆˆðš™: â†ª â„µ(hand=22), "joe", 201
î¬¦     Â¿â›dâˆˆðš™: â†ª â„µ(hand=22), b"joe", 201
î¬¦     Â¿â›eâˆˆðš™: â†ª â„µ(hand=22)
î¬¦     Â¿â›fâˆˆðš™: â†ª 201
î¬¦     â†ª 200
î¬¦ HTTP_Server(server)î®¦