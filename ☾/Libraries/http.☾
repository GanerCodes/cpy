â®Œ socketserver â¨¡  TCPServer, StreamRequestHandler ; TCPServer.allow_reuse_address = âœ“
ó°‹º(â›ğ”) ; ó°‹º(â€¹jâ˜¾â€º)

ipv4 = á‘€ á‘€âª¢ 8âŸ & 0xFFá› (4ó·¸¹)á´™ â†’ â¨â›.

âŠ¢ HTTP_Server(Æ’):
    â®Œ http.client â¨¡ responses as ğšŒmsgs
    â®Œ mimetypes â¨¡ guess_type
    ext_to_mime = ó°²¡guess_type(x)â‚€âˆ¨"text-plain"
    
    ó±€˜ ğ”–(StreamRequestHandler):
        âŠ¢ handle(ğ•Š):
            ğ”¯,ğ”´ = ğ•Š.rfile.readline, ğ•Š.rfile.write
            ğš›,â ¤ğ™· = 1ó·¸¹â­ á³ğ”¯î®¦â‰•ğš›â†’.stripî®¦â†’.decode("utf-8")á¸âŠ›Â¬âˆ˜âœ“
            ğš–,ğš™,ğšŸ = ğš›ó·¹ğ˜€
            ğ™·=â„µôŠ¾–(ğ™·áµó·¹Â¹â›:áµ.stripî®¦)êŸ¿á´·ó°²£x.lowerî®¦
            
            ğ´ = ğš–,ğš™,ğ™·
            ğšŒ,ğ™·,ğš‹ = 200, â„µî®¦, ğ‘¦âˆ˜0
            V = Æ’(â ¤ğ´,â„µ(ip=ğ•Š.client_addressâ‚€, ğ”¯=ğ”¯))
            âˆ€r âˆˆ V á£†ô¯ôŠ¾—ô‹‡’ô‹•¡ô‹‡–ô‹•¡ôŠ¾šô‹•¡ô‹‡¦ô‹•¡ô‹„… â›¶:
                Â¿rá¹ğ‘‘  : ğ™·=r.copyî®¦
                â¸˜rá¹ğ‘–  : ğšŒ=r
                â¸˜rá¹á”|ğ‘¦: ğš‹=r
            Â¿PEV("ğ™²ğšƒ")â‰•aâˆˆğ™·: ğ™·ô‹•¨î ó°‚¼â‚™â‚œâ‚‘â‚™â‚œâ‚‹â‚œî “â‚šâ‚‘ô‹•¨ = ğ™·.pop(a)â‰•vâ†’ó·¸¹â‰¡â›. â­œext_to_mime(â›_+v)â­ v
            Â¿ğš‹á¹á”:
                Â¿"content-type"â‰•kâˆ‰ğ™·: ğ™·â‚–â‰”"text/plain"
                ğš‹ = ğ‘€âˆ˜ğš‹
            Â¿ğš‹âˆ§ğ™·âˆŒkâ‰”"content-length": ğ™·â‚–â‰”ğš‹ğŸƒŒ
            ğ•Š.wfile.write(ğ‘€(â€¹HTTP/1.1 âŸ¦ğšŒâŸ§ âŸ¦ğšŒmsgs.get(ğšŒ,"?")âŸ§â€º+(ğ™·áµâ¨â›:á¸âŸ—ğ—¿ğ—»)+ğ—¿ğ—»)+ğš‹)
            
            ğ•Š.wfile.flushî®¦
    â†ª â¥Œip=ipv4(0x000000),port=8080â†¦â“¦(TCPServer((ip,port), ğ”–), ó·º¹.serve_foreverî®¦)

__exports__ = â€¹ğ”â€‰ipv4â€‰HTTP_Serverâ€‰transpileâ€‰transpile_dirâ€‰joon_headerâ€ºâ­

î¬¦ âŠ¢ server(ğš–,ğš™,ğ™·,ğš):
î¬¦     â€¹âŸ¦ğšâ±áµ–âŸ§ âŸ¦ğš–âŸ§ âŸ¦ğš™âŸ§â€ºâ˜¾
î¬¦     Â¿â›aâˆˆğš™: â†ª "joe"
î¬¦     Â¿â›bâˆˆğš™: â†ª "joe", 201
î¬¦     Â¿â›câˆˆğš™: â†ª â„µ(hand=22), "joe", 201
î¬¦     Â¿â›dâˆˆğš™: â†ª â„µ(hand=22), b"joe", 201
î¬¦     Â¿â›eâˆˆğš™: â†ª â„µ(hand=22)
î¬¦     Â¿â›fâˆˆğš™: â†ª 201
î¬¦     â†ª 200
î¬¦ HTTP_Server(server)î®¦