󱀘 winder:
    ⊢ __init__(𝕊, 𝚌, 𝚒=󷰾):
        𝕊􀲟,𝕊􀲫,𝕊􀳩 = 𝚌,𝚒,⍁
    __bool__ = 𝕊↦𝕊􀲫+1<𝕊􀲟🃌
    __repr__ = 𝕊↦‹[⟦𝕊􀲟﹕􊶊􀴺₊₁⟖𝘀⟧│⟦𝕊􀲟􊶊􀴺₊₁﹕⟕𝘀⟧]⟨⟦𝕊􀳩⨝𝘀⟧⟩›
    peek = 𝕊↦𝕊􀲟􊶊􀴺₊₁
    next = 𝕊↦𝕊􀲟􊶊􀴺􍸙₊₁
    note = 𝕊↦𝕊􀳩.append(𝕊􀲫) →► 𝕊
    eton = 𝕊↦   𝕊􀳩.pop    →► 𝕊
    wind = 𝕊↦𝕊􀲫≔𝕊􀳩.pop    →► 𝕊

ARROW_TARG = ⍁
⊢ 󷹗´(x,s=␀):
    𝚊 = ARROW_TARG􍨄
    ¿s≅␀: 𝚊.append(x); ↪x
    ¿s≡∞: 𝚊.extend(x); ↪x
    𝚊.extend(h≔x⛶ˢ); ↪h
⊢ 󷹘´(s=␀):
    𝚊 = ARROW_TARG􍨄
    ¿s≅␀: ↪𝚊.pop(󷰾)
    ¿s≡∞: r=𝚊﹕; 󰆴𝚊﹕; ↪r
    ¿s󷸊⋅󷰾⭢≡0: ↪⍁
    r=𝚊ₛ﹕; 󰆴𝚊ₛ﹕; ↪r
⊢ ⍖´(s=␀):
    𝚊 = ARROW_TARG􍨄
    ¿s≅␀: ↪𝚊􍨄
    ¿s≡∞: ↪𝚊﹕
    ¿s󷸊⋅󷰾⭢≡0: ↪⍁
    ↪𝚊ₛ﹕
󷹗´,󷹘´,⍖´ = 󷹗´⋄󷹘´⋄⍖´ᴍOPWRAP_
UGX_CREATE = ⥌x,d=✗↦󷺻UGX_RUN(winder(𝑙(⟞)), x)≕y≅␀ ⭜d⭝ y₀

⊢ UGX_SCAN(𝚚, ƒ, 𝗆):
    ¿¬𝚚: ↪ 𝗆≡␛⭜⍁⭝␀
    𝑥 = ƒ(𝚚.peek)
    V = 𝚚.next≕p≅󰮈 ∨ 𝑥≅󰮈 ⭜⍁⭝ p⛶
    ¿𝗆≡ᐦ    : ↪ 𝑥⭜V⭝␀
    ¿𝗆≡␛􊽬   : ↪ 𝑥⭜␀⭝⍁
    ¿𝗆≡␛􋅋   : ↪ 𝑥⭜⍁⭝␀
    ¿𝗆≡␛⁺∧¬𝑥: ↪ ␀
    ¿𝗆≡␛∧¬𝑥: ↪ ⍁
    ➰𝚚:
        ¿¬ƒ(𝚚.peek): ⇥
        ¿𝚚.next≕p≇󰮈: V.append(p)
    ↪ V
⊢ UGX_RUN(𝚚, 𝚞):
    𝗍, ⠤𝖠 = 𝚞
    ¿𝗍ᐹ𝗙:
        𝗆, = 𝖠
        ↪ UGX_SCAN(𝚚, 𝗍, 𝗆)
    ⸘𝗍∈␛B␛P:
        𝗌,𝗆,𝗋,𝖼 = 𝖠  stack, mod, reduce, content
        ARROW_TARG.append(𝗌)
        
        𝚚.note ► V≔r≔UGX_RUN(𝚚, 𝖼)
        ¿𝗆≡␛􋅋: 𝚚.wind ► V≔(r≅␀  ⭜␀⭝ ⍁)
        ⸘𝗆≡␛􊽬: 𝚚.wind ► V≔(r≅␀  ⭜⍁⭝ ␀)
        ⸘r≅␀ : 𝚚.wind ► V≔(𝗆≡␛􋁏 ⭜⍁⭝ ␀)
        ⸘𝗆≠ᐦ:
            ➰𝚚:
                𝚚.note ► r≔UGX_RUN(𝚚, 𝖼)
                ¿r≅␀:
                    𝚚.wind
                    ⇥
                𝚚.eton ► V.extend(r)
            𝚚.eton
        ¿𝗋≅󰮈: V = ⍁
        ¿V≇␀ ∧ 𝗋≇□: V󷸊∘ᵜ𝗋  󰤱 more ⍈ types?
        ARROW_TARG.pop(󷰾)
        ¿V≅␀: ↪V
        ↪ V ᣆ􍾒􋁤􋂝ᴮ ⛶
    ⸘𝗍∈␛∧␛∨:
        ¿𝗍≡␛∧:
            𝚚.note ► V≔⍁
            ∀U∈𝖠:
                ¿UGX_RUN(𝚚, U)≕r≅␀: ↪𝚚.wind►␀
                V.extend(r)
            ↪ 𝚚.eton ► V
        ⸘𝗍≡␛∨:
            ∀U∈𝖠:
                𝚚.note
                ¿UGX_RUN(𝚚, U)≕r≇␀: ↪𝚚.eton►r
                𝚚.wind
        ↪ ␀

 ⟨⟨󷺹󷹗>2⍮ 󷺹<⍖⍮⟩ 󷸴 ⴳ⟩∘[3,2,1,2,2,7] → ☾
 ⟨⟨󷺹󷹗>2⍮ 󷺹<⍖⍮⟩ 󷸴 ⴳ⟩∘[1,2,3,2,4,5,1,9,1] → ☾
 ⟨⟨󷺹󷹗%2⍮ 󷺹<⍖⍮ ⍈ ᴙ⟩ 󷸴 ⴳ⟩∘[0,0,1,󷰿,󷱂,0,5,2,1,10] → ☾
 ⟨⟨(󷺹>1 ⍈ ᴙ)⁺ 󷺹<5⍮ ⍈ 󷺹⨝𝘀⟩ 󷸴 󰻾 ⍈󷺹⨝‹………›⟩∘[1,2,3,4,0,0,0,1,1,8,5,9,0] → ☾