file = line_sep? statement*
statement = (macro / subdef) line_sep*

line_sep = (w / "␠")*

macro = "¡" w? macro_head w? "⟶" w? macro_body
macro_head = char_seq{1}
macro_body = content{1}

subdef = subdef_head "⟶" w? subdef_body
subdef_head = expressions{1}
subdef_body = content{1}

expressions = w? (logic_expr w?)+
logic_expr = char_seq / combo_for / combo_cat / macro_sub

combo_for = "〚" expressions "〛"
combo_cat = "⁅" expressions "⁆"
macro_sub = "⟨" char_seq "⟩"

char_seq = ~"[^⟶⟨⟩〚〛⁅⁆]+"
content = ~"[^\n␠]+"
w = ~"[ \t\n]+"