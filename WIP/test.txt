x += 2

Ö
x = 2 + a.b += 2

x += y

a.b.c[2][2].k


def split_target(l):
    l, t = l.copy(), []
    while l:
        Î± = l.pop()
        if Î±.t == "oper":
            if Î±.txt == '.':
                return '.', l, t
            assert â´´
        if Î±.t == "group" and \
                Î±.C[0].txt == '[' and \
                Î±.C[2].txt == ']':
            return 'l', l, Î±.C[1]
        t.insert(0, Î±)
    return á¦, l

def make_inline_asgn(Î±, Î£, Î²):
    Î± = split_target(Î±.C)
    if âµŒ(Î±) == 2:
        return mkgxp(
            Î±[1],
            ("oper_lit", ":="),
            mkgxp(
                ("op_call",
                mkexp(Î±[1]), Î£, mkexp(Î²))))
    
    Ï„, Îº, Î½ = Î±
    if Ï„ == '.':
        Ï1, Ï2 = "setattr_ret_", "setitem_ret_"
    else:
        Ï1, Ï2 = "getattr", "getitem"
        Î½ = ("str_escape", Î½)
    
    EQCLN = ("oper_lit", ":=")
    Ï1, Ï2 = mkvar(Ï1), mkvar(Ï2)
    Îº, Î½ = mkgxp(Îº), mkgxp(Î½)
    Åƒ("expr_",
        Ï1,
        mkgrp(Åƒ("expr_",
            ("expr_", Ã¾1 := ("var", 'Î”'), EQCLN, Îº)
            COMMA,
            ("expr_", Ã¾2 := ("var", 'Î´'), EQCLN, Î½)
            COMMA,
            ("expr",
                ("expr_",
                    Ï2,
                    mkgrp(Åƒ("expr_",
                        Ã¾1, COMMA, Ã¾2))),
                Î£, Î²))))
        
    
a.b += 2 
setattr_ret_(Î”:=(a), Î´:=('b'), getattr(Î”,Î´)+2)

a['b'] += 2
setitem_ret_(Î”:=(a), Î´:=('b'), getitem(Î”,Î´)+2)

 Ö
ğŸŸ‘
â®Œ functools â¨¡ reduce
â®Œ inspect â¨¡ currentframe, getframeinfo
â¨¡ traceback, sys

NULL = object()

LITERAL_OPS_ = {
    â›âˆ§: â‘¡xâˆ§y, â›âˆ¨: â‘¡xâˆ¨y,
    â›+: â‘¡x+y, â›-: â‘¡x-y,
    â›*: â‘¡xâ‹…y, â›/: â‘¡x/y,
    â›Â¬: â‘¡ Â¬x, â›âˆˆ: â‘¡xâˆˆy,
    â›<: â‘¡x<y, â›>: â‘¡x>y,
    '<=':â‘¡xâ‰¤y, '>=':â‘¡xâ‰¥y,
    '==':â‘¡xâ‰¡y, '!=':â‘¡xâ‰ y,
    '//': â‘¡x//y }

âˆ‹ = â‘¡y âˆˆ x


ğ‘,ğ‘™ = bool, list
ğ•‹,ğ”½,â–¡ = True, False, None

ğ• = â‘ [*ğ”¸]Â¿xâ‰…NULLÂ¡[x]
ó°ˆ² = â‘ ğ‘™(filter(*ğ•(*ğ”¸,â–¡),x))
ğ•£ = â‘ xó°ˆ²â‘ xâ‰‡NULL

á¹ = isinstance
â˜¾ = ğš²print(â ¤ğ”¸,â ¶ğ•‚)âˆ¨ğ”¸â‚€
â­¥ = â‘ ğ‘™(range(x))
â€¦ = â‘¡ğ‘™(range(x,y))
Å¿ = â‘¡reduce(y,x,â ¤ğ•£(ğ”¸))
Î  = â‘ Å¿Â´(x,â‹…,â ¤ğ•£(ğ”¸))
á´ = â‘¡ğ‘™(map(y,x))
â¨ = â‘¡ğ‘(x) â‰¡ ğ‘(y)
âŠ» = â‘¡ğ‘(x) ^ ğ‘(y)  âˆ§â†xâˆ¨y
âŠ¼ = â‘¡ğ‘(x) âˆ§ ğ‘(y)â†’Â¬âˆ§â†xâˆ¨y
â›¶ = â‘ [x]
! = â‘ 1â€¦â†x+1â†’Î 1
â‹„ = â‘¡(xÂ¿xá¹ğ‘™Â¡â›¶xâ†’+[y])

â˜¾ 1â‹„2â‹„3

î¬¦ 1â‹„2 Î¶ 3â‹„4 Å¿ â‘¡xğŸƒŒâ†’âŒƒâ†ğŸƒŒyó°…‚
î¬¦ ((1â‹„2) Î¶ (3â‹„4)) Å¿ (â‘¡xğŸƒŒâ†’âŒƒâ†ğŸƒŒyó°…‚)