î¬¦ partition pua
î¬¦ sup/sub partitioning

ğ”¦ğ”ªğ”­âˆ˜â›s

cmsr = ó°‹º(â ¤â€¹composerâ€‰symmapâ€‰generate_composeâ€ºâ­)

â¨¡ json
â®Œ platform â¨¡ uname
â®Œ random â¨¡ randint, seed
seedâˆ˜unameî®¦â‚

pua = 0x100000 â‹„ 0x10FFFD î¬¦ we own this plane

puaÎ” = puaâ‚€ + randint(0, puaá´™ â‰º- â†’â‹….9 â¥‰ ğ‘–)
oâ‰”puaâ‚€â‹„puaÎ”â‹„puaâ‚ á´hex â†’â–ºâ† â€¹Offset: âŸ¦oâ‚€âŸ§ â‰¤ âŸ¦oâ‚âŸ§ < âŸ¦oâ‚‚âŸ§â€ºâ˜¾

pua_fold = ğ©ğî®¦ / â€¹PuaMapsâ€º
lmâ‰”{} â†’â–ºâ† pua_maps_in â‰” ğ‘™âˆ˜pua_fold.glob("*.json") â›
            â†’á´ ó°²¡json.load(x.openî®¦) â›
                â†’á´á´·ó°²¡x.splitâˆ˜â›| á´ó°²¡ğ‘–(x,16)ó°…‚ â¥‰ğ‘¡ó°…‚ â›
                â†’.itemsî®¦ êŸ¿ó°²£xâ‚€â€¦xâ‚Î¶y êŸ¿â¥Œl,câ†¦
                (câ‰¡lmâ‚— â¨³ â€¹âŸ¦câŸ§â†’âŸ¦lâŸ§â†âŸ¦lmâ‚—âŸ§â€º) Â¿lâˆˆlmÂ¡ lmâ‚—â‰”c
ml = lm êŸ¿á´° ó°²£(y,x)

âŠ¢ pua_conseq(ğ”¡): î¬¦ á”s to be together
    global lm, ml
    ğ”¡ ó°ˆ³= ó°²¡xâˆˆml
    ğ• = puaÎ”-1
    â°ğ•+=1:
        Â¿Â¬ğ• â‰” (I â‰” ğ”¡â­¥á´ó°²¡ğ•+x) ó°‘… ó°²¡xâˆˆlmó°…‚: â‡¥
    lm |= ğ‘‘â†IÎ¶ğ”¡
    ml |= ğ‘‘â†ğ”¡Î¶I
    â†ª lm, ml

to_ranges = lmâ†¦[
        s â‰” lm ó°’¼ â†’ â‚€,
       â ¤s á™§ 0â‹„1 êŸ¿ó°²£x+1â‰ yâˆ§(x+1,y)ó°…‚ ó°ˆ²âŸ¤ Î£(),
        sâ‚‹â‚+1
    ] á™§Â¹ êŸ¿ó°²£((x,y), xâ€¦yá´ó°²¡lmâ‚“ó°…‚)ó°…‚ â¥‰ ğ‘‘

âŠ¢ save_pua():
    lms = to_ranges(lm) êŸ¿á´·ó°²£â€¹âŸ¦hex(x)âŸ§|âŸ¦hex(y)âŸ§â€º
    t = timeî®¦â‹…100 â¥‰ğ‘–
    pua_maps_in á´ ó°²¡x.rename(pua_fold / â€¹Oldâ€º / â€¹âŸ¦tâŸ§_âŸ¦x.nameâŸ§â€º)
    json.dump(lms, pua_fold / â€¹pua_log.jsonâ€ºâ†’.openâˆ˜â›w)
    â†ª lms

get_codepoints = â¥ŒC, pâ†¦
    c â‰” pua_conseq(Lâ‰”Cá´ó°²¡â€¹âŸ¦pâŸ§_âŸ¦xâŸ§â€º)â‚ â›
    â†’â–ºâ† CÎ¶(LÎ¶â†cá´ó°²¡xâˆˆLâˆ§câ‚“ó°…‚ó°ˆ²) â¥‰ğ‘‘

âŠ¢ get_new_chars(force_include, no_scale, multichars,
                ignore_scripts, special_symkeys):
    ğ’ = generate_compose(no_write=â´³)
    ğ’â˜¾
    exitî®¦
    
    â„­ = ğ’.itemsî®¦ ó°ˆ²ó°²¡xâ‚ğŸƒŒâ‰¡1ó°…‚ êŸ¿ó°²£(y,x)ó°…‚ â¥‰ ğ‘‘
    
    get_seq = ó°²¡â„­â‚“ Â¿xâˆˆâ„­Â¡ (x Â¿xâˆˆsymmapÂ¡ â–¡)
    
    scripts = â„­ âˆ– ignore_scripts âˆª special_symkeys
    sub = get_codepoints(scriptsá´ó°²¡xâ‚€, "sub")
    sup = get_codepoints(scriptsá´ó°²¡xâ‚€, "sup")
    mul = get_codepoints(multichars , "mul")
    
    sub = sub êŸ¿á´°ó°²£(x, (â ¤y, "/"â‹…(2-â†xâˆˆspecial_symkeys)+get_seq(x)))
    sup = sup êŸ¿á´°ó°²£(x, (â ¤y, "/"â‹…(2-â†xâˆˆspecial_symkeys)+get_seq(x)))
    mul = mul êŸ¿á´°ó°²£(x, (â ¤y, â‹€(K â‰” x á´ get_seq) âˆ§ (x,Ká´ó°²¡x+â›ğ•Šó°…‚Î£á¦)))ó°…‚
    mulâ˜¾
    î¬¦ subâ˜¾
    î¬¦ sup["?"]â˜¾
    
    î¬¦ mulâ˜¾
    î¬¦ subâ˜¾
    î¬¦ mulcomp = multicharsá´ó°²¡â‹€(K â‰” x á´ get_seq) âˆ§ (x,Ká´ó°²¡x+â›ğ•Šó°…‚Î£á¦)ó°…‚ ó°ˆ²
    
get_new_chars(
    force_include =
        â€¹Æ‡ÆŠÒ’á‚ºêˆâ±®â´½ğ–²Æ¬Ñ´Óâ„“â„˜Ï²â‰â‰¢ï½œâ”‚ï¼‹ï¼ï¼¼ï¼ƒï¼ï¼œÆ¨Æ§â™ºâ†‹â†ŠZâ…„XMÎ›â”´SÉ¹QÔ€ONWË¥ÊIH×¤â„²ÆpÆ†qzÊxÊÊŒnÊ‡sÉ¹bdouÉ¯lÊÉ¾á´‰É¥ÆƒÉŸÇpÉ”qÉğ¤ğ¦ğ§ğ©ğªğ¬ğ¾ğŠğŒğğğğ‘ğ’ğ“ğœµğ•ğ–ğ—ğ˜ğ™ğšğ›ğœğğğŸğ ğ¡ğ¢ğ£ğ¤ğ¥ğ¦ğ§ğ¨ğ©ğªğ«ğ¬ğ­ğ®ğ¯ğ°ğ±ğ²ğ³ğ´ğµğ¶ğ·ğ¸ğ¹ğºğ»ğ¼ğ½ğ¾ğ¿ğŸ€ğŸğŸ‚ğŸƒğŸ„ğŸ…ğŸ†ğŸ‡ğŸˆğŸ‰ğ“ğ“‘ğ“’ğ““ğ“”ğ“•ğ“–ğ“—ğ“˜ğ“™ğ“šğ“›ğ“œğ“ğ“ğ“Ÿğ“ ğ“¡ğ“¢ğ“£ğ“¤ğ“¥ğ“¦ğ“§ğ“¨ğ“©ğ“ªğ“«ğ“¬ğ“­ğ“®ğ“¯ğ“°ğ“±ğ“²ğ“³ğ“´ğ“µğ“¶ğ“·ğ“¸ğ“¹ğ“ºğ“»ğ“¼ğ“½ğ“¾ğ“¿ğ”€ğ”ğ”‚ğ”ƒğŸ„°ğŸ„±ğŸ„²ğŸ„³ğŸ„´ğŸ„µğŸ„¶ğŸ„·ğŸ„¸ğŸ„¹ğŸ„ºğŸ„»ğŸ„¼ğŸ„½ğŸ„¾ğŸ„¿ğŸ…€ğŸ…ğŸ…‚ğŸ…ƒğŸ…„ğŸ……ğŸ…†ğŸ…‡ğŸ…ˆğŸ…‰ĞĞ‘Ğ’Ğ“Ğ”Ğ•Ğ–Ğ—Ğ˜Ğ™ĞšĞ›ĞœĞĞĞŸĞ Ğ¡Ğ¢Ğ£Ğ¤Ğ¥Ğ¦Ğ§Ğ¨Ğ©ĞªĞ«Ğ¬Ğ­Ğ®Ğ¯Ğ°Ğ±Ğ²Ğ³Ğ´ĞµĞ¶Ğ·Ğ¸Ğ¹ĞºĞ»Ğ¼Ğ½Ğ¾Ğ¿Ñ€ÑÑ‚ÑƒÑ„Ñ…Ñ†Ñ‡ÑˆÑ‰ÑŠÑ‹ÑŒÑÑÑÎ‘Î’Î•Î–Î—Î™ÎšÎ›ÎœÎÎŸÎ¡Î¤Î¥Î¿ã€Šã€‹ï½Ÿï½ ã€”ã€•ã€ã€‘â¥â¥‘â¥œâ¥ â¥â¥¡â¦‹â¦Œâ¢¨â¡…Â£Öâ«¾âˆ¥ğœ‹â˜ƒâˆ›âˆœÃ˜â¨„â‹’â©€â¨†âˆ¬âˆ­â¨Œâˆ®âˆ¯âˆ°âˆ±â¨‘âˆ²âˆ³â¨•â¨–Ã¦Ã†â†®â‹‰â‹Šâ¨²â‹ˆâ‰€â’â•±â™­â«šÑµÂ¶â‚€â°â‚Â¹â‚™â¿áµ¢â±â±¼á¶¨â‚–áµâ‹â‹â©„â©…â©‘â©’â©“â©”â©•â©–â©™â©šâ©›â©œâ©â©â©Ÿâ© â©¢â©£â€º,
    no_scale =
        â€¹â›â€¹â›â€ºâ‘´â‘µâ‘¶â‘·â‘¸â‘¹â‘ºâ‘»â‘¼â’œâ’â’â’Ÿâ’ â’¡â’¢â’£â’¤â’¥â’¦â’§â’¨â’©â’ªâ’«â’¬â’­â’®â’¯â’°â’±â’²â’³â’´â’µğŸ„ğŸ„‘ğŸ„’ğŸ„“ğŸ„”ğŸ„•ğŸ„–ğŸ„—ğŸ„˜ğŸ„™ğŸ„šğŸ„›ğŸ„œğŸ„ğŸ„ğŸ„ŸğŸ„ ğŸ„¡ğŸ„¢ğŸ„£ğŸ„¤ğŸ„¥ğŸ„¦ğŸ„§ğŸ„¨ğŸ„©â“ªâ‘ â‘¡â‘¢â‘£â‘¤â‘¥â‘¦â‘§â‘¨â“â“‘â“’â““â“”â“•â“–â“—â“˜â“™â“šâ“›â“œâ“â“â“Ÿâ“ â“¡â“¢â“£â“¤â“¥â“¦â“§â“¨â“©â’¶â’·â’¸â’¹â’ºâ’»â’¼â’½â’¾â’¿â“€â“â“‚â“ƒâ“„â“…â“†â“‡â“ˆâ“‰â“Šâ“‹â“Œâ“â“â“ğŸ…ğŸ…‘ğŸ…’ğŸ…“ğŸ…”ğŸ…•ğŸ…–ğŸ…—ğŸ…˜ğŸ…™ğŸ…šğŸ…›ğŸ…œğŸ…ğŸ…ğŸ…ŸğŸ… ğŸ…¡ğŸ…¢ğŸ…£ğŸ…¤ğŸ…¥ğŸ…¦ğŸ…§ğŸ…¨ğŸ…©â™¼â‘©â‘ªâ‘«â‘¬â‘­â‘®â‘¯â‘°â‘±â‘²â‘³Â·Â«Â»â†¾â†¿â‡‚â‡ƒğŸ¢”ğŸ¢–â€¦ğ„½âŸâŸâ¨‡â¨ˆâœ‡â˜®ß·â™³â™´â™µâ™¶â™·â™¸â™¹â‰ƒ~â‹„â—ŒâŸâ™¢â†”â˜ºâ˜¹â™¡â›¥âœ¡ğŒƒğŒ‚*â™²âœâŸ·â­ â­¢â†â†’â†–â†—â†™â†˜ğŸ¡¹ğŸ¡»ğŸ¡¸ğŸ¡ºğŸ¡¼ğŸ¡½ğŸ¡¿ğŸ¡¾âŸµâŸ¶â‡œâ‡â‹¯â¬…âŠâ‰âŒ¾âŠ–â¨¸âŠ—âŠ•â¬¡â¨â¨‚â‹…â€¢â¬¤âˆ˜âŠ™â¨€â—‹â­—ï½âˆ—â¨¯Ã—â–¡â¨‰ï¼â”€âŸºâœ“âœ—âˆâ‰–ó·¹¯ó·¹­ó·¹®ó·¹°â€º,
    multichars =
        "ğ“µğ“·â€‰ğ“µğ“°â€‰ğ˜ğ—¿â€‰ğ—¦ğ—Ÿâ€‰ğ—šğ—Ÿâ€‰ğ—¿ğ—¸â€‰ğ˜€ğ˜â€‰ğ—ªâµâ€‰ğ—˜ğ—»ğ—±â€‰ğ—”ğ˜‚ğ˜â€‰ğ—šğ—®ğ—¹â€‰ğ—¸ğ—²ğ—¿â€‰ğ“µğ“¸ğ“°â€‰ğ˜€ğ—¶ğ—»â€‰ğ—°ğ—¼ğ˜€â€‰ğ˜ğ—®ğ—»â€‰ğ˜€ğ—²ğ—°â€‰ğ—°ğ˜€ğ—°â€‰ğ—°ğ—¼ğ˜â€‰ğ—”ğ˜€ğ˜€â€‰ğ—®ğ—¿ğ—´â€‰ğ—ºğ—¶ğ—»â€‰ğ—ºğ—®ğ˜…â€‰ğ—²ğ˜…ğ—½â€‰ğ—±ğ—¶ğ˜ƒâ€‰ğ—±ğ—²ğ˜â€‰ğ—±ğ—²ğ—´â€‰ğ—²ğ—¿ğ—³â€‰ğ—¶ğ—»ğ˜â€‰ğ—´ğ—°ğ—±â€‰ğ—¹ğ—°ğ—ºâ€‰ğ—µğ—¼ğ—ºâ€‰ğ—¼ğ—¯ğ—·â€‰ğ—¹ğ—¶ğ—ºâ€‰ğ—¶ğ—»ğ—³â€‰ğ˜€ğ˜‚ğ—½â€‰ğ—ºğ—¼ğ—±â€‰ğ—£ğ—šğ—Ÿâ€‰ğ—£ğ—¦ğ—Ÿâ€‰ğ˜€ğ—´ğ—»â€‰ğ˜ğ—¼ğ—¿â€‰ğ˜„ğ—¿ğ˜â€‰ğ—ªğ—§ğ—¦â€‰ğ—ªğ—§*â€‰ğ˜ƒğ—®ğ—¿â€‰ğ˜€ğ˜ğ—±â€‰ğ—°ğ—¼ğ˜ƒâ€‰ğ—¦ğ—£ğ—˜ğ—–â€‰ğ—¦ğ—œğ—¡ğ—›â€‰ğ—–ğ—¢ğ—¦ğ—›â€‰ğ—§ğ—”ğ—¡ğ—›â€‰ğ—¦ğ—˜ğ—–ğ—›â€‰ğ—–ğ—¦ğ—–ğ—›â€‰ğ—–ğ—¢ğ—§ğ—›â€‰ğ—–ğ—›ğ—”ğ—¥â€‰ğ—–ğ—¨ğ—¥ğ—Ÿâ€‰ğ—™ğ—¥ğ—¢ğ—•â€‰ğ—šğ—¥ğ—”ğ——â€‰ğ—¥ğ—”ğ—¡ğ—â€‰ğ—¦ğ—£ğ—”ğ—¡â€‰ğ—ªğ—Ÿğ—¢ğ—šâ€‰ğ—˜ğ—¥ğ—™ğ—–â€‰ğ— ğ—˜ğ— ğ—˜â€‰ğ—¡ğ—¨ğ—Ÿğ—Ÿâ€‰ğ—©ğ—¢ğ—œğ——â€‰ğ—–ğ—¢ğ—¥ğ—¥"â­,
    ignore_scripts =
        â€¹abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZÎ±Î²Î³Î´ÎµÎ¶Î·Î¸Î¹ÎºÎ»Î¼Î½Î¾Ï€ÏÏ‚ÏƒÏ„Ï…Ï†Ï‡ÏˆÏ‰Î“Î”Î˜ÎÎ Î£Î¦Î¨Î©0123456789,<>;+-/*=(){}[]âŠ¥âˆâ€º,
    special_symkeys = â€¹?!/&$%:â€º
)â˜¾

î¬¦ get_codepoints(["a", "bl", "c"], "sub")â˜¾
î¬¦ save_puaî®¦â˜¾